{"ast":null,"code":"import _regeneratorRuntime from\"/home/suren/Documents/webpoint-project/e-commercesite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/suren/Documents/webpoint-project/e-commercesite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/suren/Documents/webpoint-project/e-commercesite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useState}from'react';import{Switch,Route,Redirect}from'react-router-dom';import{connect}from\"react-redux\";import{setCurrentUser as _setCurrentUser}from'./redux/user/user.actions';import{auth,createUserProfileDocument}from\"./firebase/firebase.utils\";import'./App.css';import Header from'./components/header/header.component';import HomePage from'./pages/homepage/homepage.component';import ShopPage from'./pages/shop/shop.component';import SignInUpPage from'./pages/signinup/sign-in-up';import{cartActionTypes}from'./redux/cart/cart.types';import{selectCurrentUser}from'./redux/user/user.selectors';import CheckoutPage from'./pages/checkoutPage/checkout.component';import AboutUs from'./pages/about-us/about-us.component';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HatsPage=function HatsPage(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"HATS PAGE \"})});};function App(_ref){var setCurrentUser=_ref.setCurrentUser,currentUser=_ref.currentUser,toggleValue=_ref.toggleValue;// const [currentUser,setUser]=useState(null);\nuseEffect(function(){var unsubscribeFromAuth=auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth){var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!userAuth){_context.next=8;break;}_context.next=3;return createUserProfileDocument(userAuth);case 3:userRef=_context.sent;userRef.onSnapshot(function(snapShot){// setUser({\n//   id:snapShot.id,\n//   photoURL:userAuth.photoURL,\n//   ...snapShot.data()\n// })\nsetCurrentUser(_objectSpread({id:snapShot.id,photoURL:userAuth.photoURL},snapShot.data()));});console.log(\"current user\",currentUser);_context.next=9;break;case 8:setCurrentUser(null);case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());return function(){unsubscribeFromAuth();};},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{toggle:toggleValue}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:HomePage}),/*#__PURE__*/_jsx(Route,{path:\"/hats\",component:HatsPage}),/*#__PURE__*/_jsx(Route,{path:\"/shop\",component:ShopPage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/signin\",render:function render(){return currentUser?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(SignInUpPage,{});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/checkout\",component:CheckoutPage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/about-us\",component:AboutUs})]})]});}var mapStateToProps=function mapStateToProps(state){return{currentUser:selectCurrentUser(state),toggleValue:state.cart.toggleState};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setCurrentUser:function setCurrentUser(user){return dispatch(_setCurrentUser(user));}};};export default connect(mapStateToProps,mapDispatchToProps)(App);","map":{"version":3,"sources":["/home/suren/Documents/webpoint-project/e-commercesite/client/src/App.js"],"names":["React","useEffect","useState","Switch","Route","Redirect","connect","setCurrentUser","auth","createUserProfileDocument","Header","HomePage","ShopPage","SignInUpPage","cartActionTypes","selectCurrentUser","CheckoutPage","AboutUs","HatsPage","App","currentUser","toggleValue","unsubscribeFromAuth","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","id","photoURL","data","console","log","mapStateToProps","state","cart","toggleState","mapDispatchToProps","dispatch","user"],"mappings":"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","sourcesContent":["import React, { useEffect,useState } from 'react';\nimport { Switch, Route,Redirect } from 'react-router-dom';\n\n\nimport {connect} from \"react-redux\";\nimport { setCurrentUser } from './redux/user/user.actions';\nimport {auth, createUserProfileDocument } from \"./firebase/firebase.utils\";\n\nimport './App.css';\nimport Header from './components/header/header.component';\n\nimport HomePage from './pages/homepage/homepage.component';\nimport ShopPage from './pages/shop/shop.component';\nimport SignInUpPage from './pages/signinup/sign-in-up';\nimport { cartActionTypes } from './redux/cart/cart.types';\nimport { selectCurrentUser } from './redux/user/user.selectors';\nimport CheckoutPage from './pages/checkoutPage/checkout.component';\nimport AboutUs from './pages/about-us/about-us.component';\n\nconst HatsPage = () => (\n  <div>\n    <h1>HATS PAGE </h1>\n  </div>\n);\n\n\nfunction App({setCurrentUser,currentUser,toggleValue}) {\n\n  // const [currentUser,setUser]=useState(null);\n  useEffect(()=>{\n    const unsubscribeFromAuth = auth.onAuthStateChanged(async(userAuth) => {\n      //setUser(user);\n      if(userAuth){\n        const userRef=await createUserProfileDocument(userAuth);\n\n        userRef.onSnapshot((snapShot)=>{\n          // setUser({\n          //   id:snapShot.id,\n          //   photoURL:userAuth.photoURL,\n          //   ...snapShot.data()\n          // })\n          setCurrentUser(\n            {\n              id:snapShot.id,\n              photoURL:userAuth.photoURL,\n              ...snapShot.data()\n            }\n          )\n\n\n        })\n\n        console.log(\"current user\",currentUser);\n      }else{\n        setCurrentUser(null);\n      }\n      \n    })\n    return () => {\n      unsubscribeFromAuth();\n    }\n\n  }, []);\n\n\n  return (\n    <div>\n      <Header toggle={toggleValue}/>\n      <Switch>\n        <Route exact path='/' component={HomePage} />\n        <Route path='/hats' component={HatsPage} />\n        <Route path='/shop' component={ShopPage} />\n        <Route exact path='/signin' render={()=>currentUser? (<Redirect to=\"/\"/>):<SignInUpPage/>} />\n      <Route exact path=\"/checkout\" component={CheckoutPage}/>\n      <Route exact path =\"/about-us\" component={AboutUs}/>\n      </Switch>\n    </div>\n  );\n}\n\nconst mapStateToProps=(state)=>({\n  currentUser:selectCurrentUser(state),\n  toggleValue:state.cart.toggleState\n})\n\nconst mapDispatchToProps=(dispatch)=>({\nsetCurrentUser:(user)=>dispatch(setCurrentUser(user))\n})\n\nexport default connect(mapStateToProps,mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}